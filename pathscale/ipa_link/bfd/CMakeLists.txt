INCLUDE_DIRECTORIES(BEFORE
  ${BFD_SOURCE_DIR}/include
  ${BFD_SOURCE_DIR}/../include
)

SET(BFD_SRCS
archive.c
bfd.c
bfdio.c
bfdwin.c
cache.c
coffgen.c
corefile.c
format.c
init.c
libbfd.c
opncls.c
reloc.c
section.c
syms.c
hash.c
linker.c
srec.c
binary.c
tekhex.c
ihex.c
stabs.c
stab-syms.c
merge.c
dwarf2.c
simple.c
archive64.c
elf64-x86-64.c
elf64.c
elf.c
elflink.c
elf-strtab.c
elf-eh-frame.c
dwarf1.c
ipa_ld.c
ipa_cmdline.c
elf32-i386.c
elf-vxworks.c
elf32.c
i386linux.c
aout32.c
efi-app-ia32.c
cofflink.c
elf64-gen.c
elf32-gen.c
cpu-i386.c
  )
#peigen.c removed # We don't need windows related crap

# Generate ldemul-list.h
#(echo "/* This file is automatically generated.  DO NOT EDIT! */";\
#  for f in `echo " " eelf_x86_64.o eelf_i386.o ei386linux.o "" \
#   | sed -e 's/ e/ ld/g' -e 's/ ld/ /g' -e 's/[.]o//g'`; do \
#      echo "extern ld_emulation_xfer_type ld_${f}_emulation;"; \
#  done;\
#  echo "";\
#  echo "#define EMULATION_LIST \\";\
#  for f in `echo " " eelf_x86_64.o eelf_i386.o ei386linux.o "" \
#   | sed -e 's/ e/ ld/g' -e 's/ ld/ /g' -e 's/[.]o//g'`; do \
#      echo "  &ld_${f}_emulation, \\"; \
#  done;\
#  echo "  0") >ldemul-tmp.h
#mv ldemul-tmp.h ldemul-list.h


ADD_LIBRARY(bfd STATIC ${BFD_SRCS}) 
